{"remainingRequest":"D:\\~Code\\Perceptron\\PerceptronFrontEnd\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\~Code\\Perceptron\\PerceptronFrontEnd\\node_modules\\rxjs\\_esm5\\observable\\dom\\AjaxObservable.js","dependencies":[{"path":"D:\\~Code\\Perceptron\\PerceptronFrontEnd\\node_modules\\rxjs\\_esm5\\observable\\dom\\AjaxObservable.js","mtime":1532940287264},{"path":"D:\\~Code\\Perceptron\\PerceptronFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1532940271448},{"path":"D:\\~Code\\Perceptron\\PerceptronFrontEnd\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1532940256149}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { root } from '../../util/root';\r\nimport { tryCatch } from '../../util/tryCatch';\r\nimport { errorObject } from '../../util/errorObject';\r\nimport { Observable } from '../../Observable';\r\nimport { Subscriber } from '../../Subscriber';\r\nimport { map } from '../../operators/map';\r\nfunction getCORSRequest() {\r\n    if (root.XMLHttpRequest) {\r\n        return new root.XMLHttpRequest();\r\n    }\r\n    else if (!!root.XDomainRequest) {\r\n        return new root.XDomainRequest();\r\n    }\r\n    else {\r\n        throw new Error('CORS is not supported by your browser');\r\n    }\r\n}\r\nfunction getXMLHttpRequest() {\r\n    if (root.XMLHttpRequest) {\r\n        return new root.XMLHttpRequest();\r\n    }\r\n    else {\r\n        var progId = void 0;\r\n        try {\r\n            var progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];\r\n            for (var i = 0; i < 3; i++) {\r\n                try {\r\n                    progId = progIds[i];\r\n                    if (new root.ActiveXObject(progId)) {\r\n                        break;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                }\r\n            }\r\n            return new root.ActiveXObject(progId);\r\n        }\r\n        catch (e) {\r\n            throw new Error('XMLHttpRequest is not supported by your browser');\r\n        }\r\n    }\r\n}\r\nexport function ajaxGet(url, headers) {\r\n    if (headers === void 0) {\r\n        headers = null;\r\n    }\r\n    return new AjaxObservable({ method: 'GET', url: url, headers: headers });\r\n}\r\n;\r\nexport function ajaxPost(url, body, headers) {\r\n    return new AjaxObservable({ method: 'POST', url: url, body: body, headers: headers });\r\n}\r\n;\r\nexport function ajaxDelete(url, headers) {\r\n    return new AjaxObservable({ method: 'DELETE', url: url, headers: headers });\r\n}\r\n;\r\nexport function ajaxPut(url, body, headers) {\r\n    return new AjaxObservable({ method: 'PUT', url: url, body: body, headers: headers });\r\n}\r\n;\r\nexport function ajaxPatch(url, body, headers) {\r\n    return new AjaxObservable({ method: 'PATCH', url: url, body: body, headers: headers });\r\n}\r\n;\r\nvar mapResponse = map(function (x, index) { return x.response; });\r\nexport function ajaxGetJSON(url, headers) {\r\n    return mapResponse(new AjaxObservable({\r\n        method: 'GET',\r\n        url: url,\r\n        responseType: 'json',\r\n        headers: headers\r\n    }));\r\n}\r\n;\r\n/**\r\n * We need this JSDoc comment for affecting ESDoc.\r\n * @extends {Ignored}\r\n * @hide true\r\n */\r\nexport var AjaxObservable = /*@__PURE__*/ (function (_super) {\r\n    __extends(AjaxObservable, _super);\r\n    function AjaxObservable(urlOrRequest) {\r\n        _super.call(this);\r\n        var request = {\r\n            async: true,\r\n            createXHR: function () {\r\n                return this.crossDomain ? getCORSRequest.call(this) : getXMLHttpRequest();\r\n            },\r\n            crossDomain: false,\r\n            withCredentials: false,\r\n            headers: {},\r\n            method: 'GET',\r\n            responseType: 'json',\r\n            timeout: 0\r\n        };\r\n        if (typeof urlOrRequest === 'string') {\r\n            request.url = urlOrRequest;\r\n        }\r\n        else {\r\n            for (var prop in urlOrRequest) {\r\n                if (urlOrRequest.hasOwnProperty(prop)) {\r\n                    request[prop] = urlOrRequest[prop];\r\n                }\r\n            }\r\n        }\r\n        this.request = request;\r\n    }\r\n    AjaxObservable.prototype._subscribe = function (subscriber) {\r\n        return new AjaxSubscriber(subscriber, this.request);\r\n    };\r\n    /**\r\n     * Creates an observable for an Ajax request with either a request object with\r\n     * url, headers, etc or a string for a URL.\r\n     *\r\n     * @example\r\n     * source = Rx.Observable.ajax('/products');\r\n     * source = Rx.Observable.ajax({ url: 'products', method: 'GET' });\r\n     *\r\n     * @param {string|Object} request Can be one of the following:\r\n     *   A string of the URL to make the Ajax call.\r\n     *   An object with the following properties\r\n     *   - url: URL of the request\r\n     *   - body: The body of the request\r\n     *   - method: Method of the request, such as GET, POST, PUT, PATCH, DELETE\r\n     *   - async: Whether the request is async\r\n     *   - headers: Optional headers\r\n     *   - crossDomain: true if a cross domain request, else false\r\n     *   - createXHR: a function to override if you need to use an alternate\r\n     *   XMLHttpRequest implementation.\r\n     *   - resultSelector: a function to use to alter the output value type of\r\n     *   the Observable. Gets {@link AjaxResponse} as an argument.\r\n     * @return {Observable} An observable sequence containing the XMLHttpRequest.\r\n     * @static true\r\n     * @name ajax\r\n     * @owner Observable\r\n    */\r\n    AjaxObservable.create = (function () {\r\n        var create = function (urlOrRequest) {\r\n            return new AjaxObservable(urlOrRequest);\r\n        };\r\n        create.get = ajaxGet;\r\n        create.post = ajaxPost;\r\n        create.delete = ajaxDelete;\r\n        create.put = ajaxPut;\r\n        create.patch = ajaxPatch;\r\n        create.getJSON = ajaxGetJSON;\r\n        return create;\r\n    })();\r\n    return AjaxObservable;\r\n}(Observable));\r\n/**\r\n * We need this JSDoc comment for affecting ESDoc.\r\n * @ignore\r\n * @extends {Ignored}\r\n */\r\nexport var AjaxSubscriber = /*@__PURE__*/ (function (_super) {\r\n    __extends(AjaxSubscriber, _super);\r\n    function AjaxSubscriber(destination, request) {\r\n        _super.call(this, destination);\r\n        this.request = request;\r\n        this.done = false;\r\n        var headers = request.headers = request.headers || {};\r\n        // force CORS if requested\r\n        if (!request.crossDomain && !headers['X-Requested-With']) {\r\n            headers['X-Requested-With'] = 'XMLHttpRequest';\r\n        }\r\n        // ensure content type is set\r\n        if (!('Content-Type' in headers) && !(root.FormData && request.body instanceof root.FormData) && typeof request.body !== 'undefined') {\r\n            headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\r\n        }\r\n        // properly serialize body\r\n        request.body = this.serializeBody(request.body, request.headers['Content-Type']);\r\n        this.send();\r\n    }\r\n    AjaxSubscriber.prototype.next = function (e) {\r\n        this.done = true;\r\n        var _a = this, xhr = _a.xhr, request = _a.request, destination = _a.destination;\r\n        var response = new AjaxResponse(e, xhr, request);\r\n        destination.next(response);\r\n    };\r\n    AjaxSubscriber.prototype.send = function () {\r\n        var _a = this, request = _a.request, _b = _a.request, user = _b.user, method = _b.method, url = _b.url, async = _b.async, password = _b.password, headers = _b.headers, body = _b.body;\r\n        var createXHR = request.createXHR;\r\n        var xhr = tryCatch(createXHR).call(request);\r\n        if (xhr === errorObject) {\r\n            this.error(errorObject.e);\r\n        }\r\n        else {\r\n            this.xhr = xhr;\r\n            // set up the events before open XHR\r\n            // https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\r\n            // You need to add the event listeners before calling open() on the request.\r\n            // Otherwise the progress events will not fire.\r\n            this.setupEvents(xhr, request);\r\n            // open XHR\r\n            var result = void 0;\r\n            if (user) {\r\n                result = tryCatch(xhr.open).call(xhr, method, url, async, user, password);\r\n            }\r\n            else {\r\n                result = tryCatch(xhr.open).call(xhr, method, url, async);\r\n            }\r\n            if (result === errorObject) {\r\n                this.error(errorObject.e);\r\n                return null;\r\n            }\r\n            // timeout, responseType and withCredentials can be set once the XHR is open\r\n            if (async) {\r\n                xhr.timeout = request.timeout;\r\n                xhr.responseType = request.responseType;\r\n            }\r\n            if ('withCredentials' in xhr) {\r\n                xhr.withCredentials = !!request.withCredentials;\r\n            }\r\n            // set headers\r\n            this.setHeaders(xhr, headers);\r\n            // finally send the request\r\n            result = body ? tryCatch(xhr.send).call(xhr, body) : tryCatch(xhr.send).call(xhr);\r\n            if (result === errorObject) {\r\n                this.error(errorObject.e);\r\n                return null;\r\n            }\r\n        }\r\n        return xhr;\r\n    };\r\n    AjaxSubscriber.prototype.serializeBody = function (body, contentType) {\r\n        if (!body || typeof body === 'string') {\r\n            return body;\r\n        }\r\n        else if (root.FormData && body instanceof root.FormData) {\r\n            return body;\r\n        }\r\n        if (contentType) {\r\n            var splitIndex = contentType.indexOf(';');\r\n            if (splitIndex !== -1) {\r\n                contentType = contentType.substring(0, splitIndex);\r\n            }\r\n        }\r\n        switch (contentType) {\r\n            case 'application/x-www-form-urlencoded':\r\n                return Object.keys(body).map(function (key) { return (encodeURI(key) + \"=\" + encodeURI(body[key])); }).join('&');\r\n            case 'application/json':\r\n                return JSON.stringify(body);\r\n            default:\r\n                return body;\r\n        }\r\n    };\r\n    AjaxSubscriber.prototype.setHeaders = function (xhr, headers) {\r\n        for (var key in headers) {\r\n            if (headers.hasOwnProperty(key)) {\r\n                xhr.setRequestHeader(key, headers[key]);\r\n            }\r\n        }\r\n    };\r\n    AjaxSubscriber.prototype.setupEvents = function (xhr, request) {\r\n        var progressSubscriber = request.progressSubscriber;\r\n        function xhrTimeout(e) {\r\n            var _a = xhrTimeout, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\r\n            if (progressSubscriber) {\r\n                progressSubscriber.error(e);\r\n            }\r\n            subscriber.error(new AjaxTimeoutError(this, request)); //TODO: Make betterer.\r\n        }\r\n        ;\r\n        xhr.ontimeout = xhrTimeout;\r\n        xhrTimeout.request = request;\r\n        xhrTimeout.subscriber = this;\r\n        xhrTimeout.progressSubscriber = progressSubscriber;\r\n        if (xhr.upload && 'withCredentials' in xhr) {\r\n            if (progressSubscriber) {\r\n                var xhrProgress_1;\r\n                xhrProgress_1 = function (e) {\r\n                    var progressSubscriber = xhrProgress_1.progressSubscriber;\r\n                    progressSubscriber.next(e);\r\n                };\r\n                if (root.XDomainRequest) {\r\n                    xhr.onprogress = xhrProgress_1;\r\n                }\r\n                else {\r\n                    xhr.upload.onprogress = xhrProgress_1;\r\n                }\r\n                xhrProgress_1.progressSubscriber = progressSubscriber;\r\n            }\r\n            var xhrError_1;\r\n            xhrError_1 = function (e) {\r\n                var _a = xhrError_1, progressSubscriber = _a.progressSubscriber, subscriber = _a.subscriber, request = _a.request;\r\n                if (progressSubscriber) {\r\n                    progressSubscriber.error(e);\r\n                }\r\n                subscriber.error(new AjaxError('ajax error', this, request));\r\n            };\r\n            xhr.onerror = xhrError_1;\r\n            xhrError_1.request = request;\r\n            xhrError_1.subscriber = this;\r\n            xhrError_1.progressSubscriber = progressSubscriber;\r\n        }\r\n        function xhrReadyStateChange(e) {\r\n            var _a = xhrReadyStateChange, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\r\n            if (this.readyState === 4) {\r\n                // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\r\n                var status_1 = this.status === 1223 ? 204 : this.status;\r\n                var response = (this.responseType === 'text' ? (this.response || this.responseText) : this.response);\r\n                // fix status code when it is 0 (0 status is undocumented).\r\n                // Occurs when accessing file resources or on Android 4.1 stock browser\r\n                // while retrieving files from application cache.\r\n                if (status_1 === 0) {\r\n                    status_1 = response ? 200 : 0;\r\n                }\r\n                if (200 <= status_1 && status_1 < 300) {\r\n                    if (progressSubscriber) {\r\n                        progressSubscriber.complete();\r\n                    }\r\n                    subscriber.next(e);\r\n                    subscriber.complete();\r\n                }\r\n                else {\r\n                    if (progressSubscriber) {\r\n                        progressSubscriber.error(e);\r\n                    }\r\n                    subscriber.error(new AjaxError('ajax error ' + status_1, this, request));\r\n                }\r\n            }\r\n        }\r\n        ;\r\n        xhr.onreadystatechange = xhrReadyStateChange;\r\n        xhrReadyStateChange.subscriber = this;\r\n        xhrReadyStateChange.progressSubscriber = progressSubscriber;\r\n        xhrReadyStateChange.request = request;\r\n    };\r\n    AjaxSubscriber.prototype.unsubscribe = function () {\r\n        var _a = this, done = _a.done, xhr = _a.xhr;\r\n        if (!done && xhr && xhr.readyState !== 4 && typeof xhr.abort === 'function') {\r\n            xhr.abort();\r\n        }\r\n        _super.prototype.unsubscribe.call(this);\r\n    };\r\n    return AjaxSubscriber;\r\n}(Subscriber));\r\n/**\r\n * A normalized AJAX response.\r\n *\r\n * @see {@link ajax}\r\n *\r\n * @class AjaxResponse\r\n */\r\nexport var AjaxResponse = /*@__PURE__*/ (function () {\r\n    function AjaxResponse(originalEvent, xhr, request) {\r\n        this.originalEvent = originalEvent;\r\n        this.xhr = xhr;\r\n        this.request = request;\r\n        this.status = xhr.status;\r\n        this.responseType = xhr.responseType || request.responseType;\r\n        this.response = parseXhrResponse(this.responseType, xhr);\r\n    }\r\n    return AjaxResponse;\r\n}());\r\n/**\r\n * A normalized AJAX error.\r\n *\r\n * @see {@link ajax}\r\n *\r\n * @class AjaxError\r\n */\r\nexport var AjaxError = /*@__PURE__*/ (function (_super) {\r\n    __extends(AjaxError, _super);\r\n    function AjaxError(message, xhr, request) {\r\n        _super.call(this, message);\r\n        this.message = message;\r\n        this.xhr = xhr;\r\n        this.request = request;\r\n        this.status = xhr.status;\r\n        this.responseType = xhr.responseType || request.responseType;\r\n        this.response = parseXhrResponse(this.responseType, xhr);\r\n    }\r\n    return AjaxError;\r\n}(Error));\r\nfunction parseXhrResponse(responseType, xhr) {\r\n    switch (responseType) {\r\n        case 'json':\r\n            if ('response' in xhr) {\r\n                //IE does not support json as responseType, parse it internally\r\n                return xhr.responseType ? xhr.response : JSON.parse(xhr.response || xhr.responseText || 'null');\r\n            }\r\n            else {\r\n                return JSON.parse(xhr.responseText || 'null');\r\n            }\r\n        case 'xml':\r\n            return xhr.responseXML;\r\n        case 'text':\r\n        default:\r\n            return ('response' in xhr) ? xhr.response : xhr.responseText;\r\n    }\r\n}\r\n/**\r\n * @see {@link ajax}\r\n *\r\n * @class AjaxTimeoutError\r\n */\r\nexport var AjaxTimeoutError = /*@__PURE__*/ (function (_super) {\r\n    __extends(AjaxTimeoutError, _super);\r\n    function AjaxTimeoutError(xhr, request) {\r\n        _super.call(this, 'ajax timeout', xhr, request);\r\n    }\r\n    return AjaxTimeoutError;\r\n}(AjaxError));\r\n//# sourceMappingURL=AjaxObservable.js.map \r\n",null]}